<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.32">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png"><link rel="icon" href="images/favicon.ico"><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#ffffff"><meta name="google-site-verification"><title>subprocess | School</title><meta name="description" content="不抛弃，不放弃">
    <link rel="modulepreload" href="/school/assets/app.a770902d.js"><link rel="modulepreload" href="/school/assets/subprocess.html.7bd004ae.js"><link rel="modulepreload" href="/school/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/school/assets/subprocess.html.7d516d5a.js">
    <link rel="stylesheet" href="/school/assets/style.b355fc9d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/school/" class=""><img class="logo" src="/school/images/hero.png" alt="School"><span class="site-name can-hide">School</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/school/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络"><span class="title">网络</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络"><span class="title">网络</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>数据通信</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/dc/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/dc/trans/" class="" aria-label="数据传输"><!--[--><!--]--> 数据传输 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>TCP/IP</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/netlayer/" class="" aria-label="网络层"><!--[--><!--]--> 网络层 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/translayer/" class="" aria-label="传输层"><!--[--><!--]--> 传输层 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络技术</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/tech/lan/" class="" aria-label="局域网"><!--[--><!--]--> 局域网 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tech/eth/" class="" aria-label="以太网交换技术"><!--[--><!--]--> 以太网交换技术 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络安全</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/sec/firewall/" class="" aria-label="防火墙"><!--[--><!--]--> 防火墙 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="研发"><span class="title">研发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="研发"><span class="title">研发</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/python/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/python/module/" class="router-link-active" aria-label="模块"><!--[--><!--]--> 模块 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>测试</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/python/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/ruby/" class="" aria-label="Vuetify"><!--[--><!--]--> Vuetify <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="管理"><span class="title">管理</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="管理"><span class="title">管理</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/python/" class="" aria-label="过程组"><!--[--><!--]--> 过程组 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/ruby/" class="" aria-label="知识域"><!--[--><!--]--> 知识域 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/tools/net/netwox/" class="" aria-label="NetWox"><!--[--><!--]--> NetWox <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/net/wireshark/" class="" aria-label="WireShark"><!--[--><!--]--> WireShark <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>研发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/yum/" class="" aria-label="Yum"><!--[--><!--]--> Yum <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/github/" class="" aria-label="Github"><!--[--><!--]--> Github <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/vscode/" class="" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/school/more/website.html" class="" aria-label="收藏"><!--[--><!--]--> 收藏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/school/more/reading/" class="" aria-label="读书"><!--[--><!--]--> 读书 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="切换夜间模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/school/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="网络"><span class="title">网络</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="网络"><span class="title">网络</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>数据通信</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/dc/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/dc/trans/" class="" aria-label="数据传输"><!--[--><!--]--> 数据传输 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>TCP/IP</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/netlayer/" class="" aria-label="网络层"><!--[--><!--]--> 网络层 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tcpip/translayer/" class="" aria-label="传输层"><!--[--><!--]--> 传输层 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络技术</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/tech/lan/" class="" aria-label="局域网"><!--[--><!--]--> 局域网 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/net/tech/eth/" class="" aria-label="以太网交换技术"><!--[--><!--]--> 以太网交换技术 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络安全</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/net/sec/firewall/" class="" aria-label="防火墙"><!--[--><!--]--> 防火墙 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="研发"><span class="title">研发</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="研发"><span class="title">研发</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>Python</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/python/basic/" class="" aria-label="基础"><!--[--><!--]--> 基础 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/python/module/" class="router-link-active" aria-label="模块"><!--[--><!--]--> 模块 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>测试</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/python/" class="" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/ruby/" class="" aria-label="Vuetify"><!--[--><!--]--> Vuetify <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="管理"><span class="title">管理</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="管理"><span class="title">管理</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>基础</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/python/" class="" aria-label="过程组"><!--[--><!--]--> 过程组 <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/dev/backend/ruby/" class="" aria-label="知识域"><!--[--><!--]--> 知识域 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工具"><span class="title">工具</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工具"><span class="title">工具</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>网络</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/tools/net/netwox/" class="" aria-label="NetWox"><!--[--><!--]--> NetWox <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/net/wireshark/" class="" aria-label="WireShark"><!--[--><!--]--> WireShark <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>研发</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/git/" class="" aria-label="Git"><!--[--><!--]--> Git <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/yum/" class="" aria-label="Yum"><!--[--><!--]--> Yum <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/github/" class="" aria-label="Github"><!--[--><!--]--> Github <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/school/tools/dev/vscode/" class="" aria-label="VSCode"><!--[--><!--]--> VSCode <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="更多"><span class="title">更多</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="更多"><span class="title">更多</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/school/more/website.html" class="" aria-label="收藏"><!--[--><!--]--> 收藏 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/school/more/reading/" class="" aria-label="读书"><!--[--><!--]--> 读书 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p class="sidebar-item sidebar-heading active">MODULE <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/school/dev/python/module/" class="router-link-active sidebar-item" aria-label="Python 模块"><!--[--><!--]--> Python 模块 <!--[--><!--]--></a><!----></li><li><a href="/school/dev/python/module/builtin.html" class="sidebar-item" aria-label="常用内建模块"><!--[--><!--]--> 常用内建模块 <!--[--><!--]--></a><!----></li><li><a href="/school/dev/python/module/impacket.html" class="sidebar-item" aria-label="Impacket"><!--[--><!--]--> Impacket <!--[--><!--]--></a><!----></li><li><a href="/school/dev/python/module/paramiko.html" class="sidebar-item" aria-label="Paramiko"><!--[--><!--]--> Paramiko <!--[--><!--]--></a><!----></li><li><a href="/school/dev/python/module/pyshark.html" class="sidebar-item" aria-label="pyshark网络数据包解析"><!--[--><!--]--> pyshark网络数据包解析 <!--[--><!--]--></a><!----></li><li><a href="/school/dev/python/module/scrapy.html" class="sidebar-item" aria-label="Scrapy网络数据处理框架"><!--[--><!--]--> Scrapy网络数据处理框架 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/school/dev/python/module/subprocess.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="subprocess"><!--[--><!--]--> subprocess <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/school/dev/python/module/subprocess.html#run-方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="run()方法"><!--[--><!--]--> run()方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/school/dev/python/module/subprocess.html#popen-方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="Popen() 方法"><!--[--><!--]--> Popen() 方法 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/school/dev/python/module/subprocess.html#popen-对象方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="Popen 对象方法"><!--[--><!--]--> Popen 对象方法 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/school/dev/python/module/subprocess.html#示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="示例"><!--[--><!--]--> 示例 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/school/dev/python/module/virtualenv.html" class="sidebar-item" aria-label="virtualenv"><!--[--><!--]--> virtualenv <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="subprocess" tabindex="-1"><a class="header-anchor" href="#subprocess" aria-hidden="true">#</a> subprocess</h1><p>subprocess 模块允许我们启动一个新进程，并连接到它们的输入/输出/错误管道，从而获取返回值。 Python3官方文档：<a href="https://docs.python.org/zh-cn/3/library/subprocess.html" target="_blank" rel="noopener noreferrer">https://docs.python.org/zh-cn/3/library/subprocess.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span></a></p><p>subprocess 模块首先推荐使用的是它的<code>run</code>方法，更高级的用法可以直接使用 <code>Popen</code> 接口。</p><h2 id="run-方法" tabindex="-1"><a class="header-anchor" href="#run-方法" aria-hidden="true">#</a> run()方法</h2><div class="language-python ext-py"><pre class="language-python"><code>subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>args<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">,</span> stdin<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token builtin">input</span><span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stdout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stderr<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> capture_output<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> cwd<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> check<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> text<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> env<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> universal_newlines<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>args：被用作启动进程的参数. 可能是一个列表或字符串。</li><li>stdin、stdout 和 stderr：子进程的标准输入、输出和错误。其值可以是 subprocess.PIPE、subprocess.DEVNULL、一个已经存在的文件描述符、已经打开的文件对象或者 None。subprocess.PIPE 表示为子进程创建新的管道。subprocess.DEVNULL 表示使用 os.devnull。默认使用的是 None，表示什么都不做。另外，stderr 可以合并到 stdout 里一起输出。</li><li>timeout：设置命令超时时间。如果命令执行时间超时，子进程将被杀死，并弹出 TimeoutExpired 异常。</li><li>check：如果该参数设置为 True，并且进程退出状态码不是 0，则弹 出 CalledProcessError 异常。</li><li>encoding: 如果指定了该参数，则 stdin、stdout 和 stderr 可以接收字符串数据，并以该编码方式编码。否则只接收 bytes 类型的数据。</li><li>shell：如果该参数为 True，将通过操作系统的 shell 执行指定的命令。</li></ul><p>run 方法调用方式返回 CompletedProcess 实例，和直接 Popen 差不多，实现是一样的，实际也是调用 Popen，与 Popen 构造函数大致相同，例如:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment">#执行ls -l /dev/null 命令</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-l&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/dev/null&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
crw<span class="token operator">-</span>rw<span class="token operator">-</span>rw<span class="token operator">-</span>  <span class="token number">1</span> root  wheel    <span class="token number">3</span><span class="token punctuation">,</span>   <span class="token number">2</span>  <span class="token number">5</span>  <span class="token number">4</span> <span class="token number">13</span><span class="token punctuation">:</span><span class="token number">34</span> <span class="token operator">/</span>dev<span class="token operator">/</span>null
CompletedProcess<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;ls&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-l&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/dev/null&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> returncode<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p>returncode: 执行完子进程状态，通常返回状态为0则表明它已经运行完毕，若值为负值 &quot;-N&quot;,表明子进程被终。</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> subprocess
<span class="token keyword">def</span> <span class="token function">runcmd</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>command<span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>timeout<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> ret<span class="token punctuation">.</span>returncode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;success:&quot;</span><span class="token punctuation">,</span>ret<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span>ret<span class="token punctuation">)</span>


runcmd<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;dir&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/b&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">#序列参数</span>
runcmd<span class="token punctuation">(</span><span class="token string">&quot;exit 1&quot;</span><span class="token punctuation">)</span><span class="token comment">#字符串参数</span>
</code></pre></div><p>输出结果如下：</p><div class="language-python ext-py"><pre class="language-python"><code>success<span class="token punctuation">:</span> CompletedProcess<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&#39;dir&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> returncode<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> stdout<span class="token operator">=</span><span class="token string">&#39;test.py\n&#39;</span><span class="token punctuation">,</span> stderr<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
error<span class="token punctuation">:</span> CompletedProcess<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token string">&#39;exit 1&#39;</span><span class="token punctuation">,</span> returncode<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> stdout<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> stderr<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="popen-方法" tabindex="-1"><a class="header-anchor" href="#popen-方法" aria-hidden="true">#</a> Popen() 方法</h2><p>Popen 是 subprocess的核心，子进程的创建和管理都靠它处理。</p><p>构造函数：</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">subprocess</span><span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>args<span class="token punctuation">,</span> bufsize<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> executable<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stdin<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stdout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> stderr<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> 
preexec_fn<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> close_fds<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> cwd<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> env<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> universal_newlines<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> 
startupinfo<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> creationflags<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>restore_signals<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> start_new_session<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> pass_fds<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token operator">*</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> errors<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
</code></pre></div><p>常用参数：</p><ul><li>args：shell命令，可以是字符串或者序列类型（如：list，元组）</li><li>bufsize：缓冲区大小。当创建标准流的管道对象时使用，默认-1。 0：不使用缓冲区 1：表示行缓冲，仅当universal_newlines=True时可用，也就是文本模式 正数：表示缓冲区大小 负数：表示使用系统默认的缓冲区大小。</li><li>stdin, stdout, stderr：分别表示程序的标准输入、输出、错误句柄</li><li>preexec_fn：只在 Unix 平台下有效，用于指定一个可执行对象（callable object），它将在子进程运行之前被调用</li><li>shell：如果该参数为 True，将通过操作系统的 shell 执行指定的命令。</li><li>cwd：用于设置子进程的当前目录。</li><li>env：用于指定子进程的环境变量。如果 env = None，子进程的环境变量将从父进程中继承。</li></ul><p>创建一个子进程，然后执行一个简单的命令:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> subprocess
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span><span class="token string">&#39;ls -l&#39;</span><span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> total <span class="token number">164</span>
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">-</span><span class="token operator">-</span>r<span class="token operator">-</span><span class="token operator">-</span>  <span class="token number">1</span> root root   <span class="token number">133</span> Jul  <span class="token number">4</span> <span class="token number">16</span><span class="token punctuation">:</span><span class="token number">25</span> admin<span class="token operator">-</span>openrc<span class="token punctuation">.</span>sh
<span class="token operator">-</span>rw<span class="token operator">-</span>r<span class="token operator">-</span><span class="token operator">-</span>r<span class="token operator">-</span><span class="token operator">-</span>  <span class="token number">1</span> root root   <span class="token number">268</span> Jul <span class="token number">10</span> <span class="token number">15</span><span class="token punctuation">:</span><span class="token number">55</span> admin<span class="token operator">-</span>openrc<span class="token operator">-</span>v3<span class="token punctuation">.</span>sh
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>returncode
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">0</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>returncode
</code></pre></div><h3 id="popen-对象方法" tabindex="-1"><a class="header-anchor" href="#popen-对象方法" aria-hidden="true">#</a> Popen 对象方法</h3><ul><li>poll(): 检查进程是否终止，如果终止返回 returncode，否则返回 None。</li><li>wait(timeout): 等待子进程终止。</li><li>communicate(input,timeout): 和子进程交互，发送和读取数据。</li><li>send_signal(singnal): 发送信号到子进程 。</li><li>terminate(): 停止子进程,也就是发送SIGTERM信号到子进程。</li><li>kill(): 杀死子进程。发送 SIGKILL 信号到子进程。</li></ul><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> time
<span class="token keyword">import</span> subprocess

<span class="token keyword">def</span> <span class="token function">cmd</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">:</span>
    subp <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>command<span class="token punctuation">,</span>shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>
    subp<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> subp<span class="token punctuation">.</span>poll<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>subp<span class="token punctuation">.</span>communicate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;失败&quot;</span><span class="token punctuation">)</span>

cmd<span class="token punctuation">(</span><span class="token string">&quot;java -version&quot;</span><span class="token punctuation">)</span>
cmd<span class="token punctuation">(</span><span class="token string">&quot;exit 1&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>输出结果如下：</p><div class="language-python ext-py"><pre class="language-python"><code>java version <span class="token string">&quot;1.8.0_31&quot;</span>
Java<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> SE Runtime Environment <span class="token punctuation">(</span>build <span class="token number">1.8</span><span class="token number">.0_31</span><span class="token operator">-</span>b13<span class="token punctuation">)</span>
Java HotSpot<span class="token punctuation">(</span>TM<span class="token punctuation">)</span> <span class="token number">64</span><span class="token operator">-</span>Bit Server VM <span class="token punctuation">(</span>build <span class="token number">25.31</span><span class="token operator">-</span>b07<span class="token punctuation">,</span> mixed mode<span class="token punctuation">)</span>

失败
</code></pre></div><h2 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h2><ul><li>ping:</li></ul><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment"># 需要导入模块: import subprocess [as 别名]</span>
<span class="token comment"># 或者: from subprocess import run [as 别名]</span>
<span class="token keyword">def</span> <span class="token function">ping</span><span class="token punctuation">(</span>ns_name<span class="token punctuation">,</span> source_lo_addr<span class="token punctuation">,</span> dest_lo_addr<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;ip&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;netns&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;exec&#39;</span><span class="token punctuation">,</span> ns_name<span class="token punctuation">,</span> <span class="token string">&#39;ping&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-f&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-W1&#39;</span><span class="token punctuation">,</span>
                                 <span class="token string">&#39;-c{}&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>PING_PACKTES<span class="token punctuation">)</span><span class="token punctuation">,</span>
                                 <span class="token string">&#39;-I&#39;</span><span class="token punctuation">,</span> source_lo_addr<span class="token punctuation">,</span> dest_lo_addr<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
    <span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>
        fatal_error<span class="token punctuation">(</span><span class="token string">&#39;&quot;ping&quot; command not found&#39;</span><span class="token punctuation">)</span>
    output <span class="token operator">=</span> result<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&#39;ascii&#39;</span><span class="token punctuation">)</span>
    lines <span class="token operator">=</span> output<span class="token punctuation">.</span>splitlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> lines<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">&quot;packets transmitted&quot;</span> <span class="token keyword">in</span> line<span class="token punctuation">:</span>
            split_line <span class="token operator">=</span> line<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>
            packets_transmitted <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>split_line<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            packets_received <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>split_line<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>packets_transmitted<span class="token punctuation">,</span> packets_received<span class="token punctuation">)</span>
    fatal_error<span class="token punctuation">(</span><span class="token string">&#39;Could not determine ping statistics for namespace &quot;{}&quot;&#39;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>ns_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token boolean">None</span>  <span class="token comment"># Never reached</span>
</code></pre></div><ul><li>popen:</li></ul><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment"># 需要导入模块: import subprocess [as 别名]</span>
<span class="token comment"># 或者: from subprocess import Popen [as 别名]</span>
<span class="token keyword">def</span> <span class="token function">popen</span><span class="token punctuation">(</span>cls<span class="token punctuation">,</span> cmd<span class="token punctuation">,</span> cwd<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> raises<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&#39;&#39;&#39;
            Execute the given command string in a new process. Send data to stdin and
        read data from stdout and stderr, until end-of-file is reached.

        :param cls     : The class as implicit first argument.
        :param cwd     : If it is set, then the child&#39;s current directory will be change
                         to `cwd` before it is executed.
        :param raises  : If ``True`` and stderr has data, it raises an ``OSError`` exception.
        :returns       : The output of the given command; pair of (stdout, stderr).
        :rtype         : ``tuple``
        :raises OSError: If `raises` and stderr has data.
        &#39;&#39;&#39;</span>
        parser   <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token string">&#39;&#39;</span> <span class="token keyword">else</span> <span class="token punctuation">[</span>y<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> y <span class="token keyword">in</span> x<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        process  <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>cmd<span class="token punctuation">,</span> shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> universal_newlines<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                    stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span> stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">)</span>
        out<span class="token punctuation">,</span> err <span class="token operator">=</span> process<span class="token punctuation">.</span>communicate<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># .............................trim lines and remove the empty ones</span>
        _stdout  <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> parser<span class="token punctuation">(</span>out<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">bool</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span>
        _stderr  <span class="token operator">=</span> <span class="token punctuation">[</span>x <span class="token keyword">for</span> x <span class="token keyword">in</span> parser<span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token builtin">bool</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span>

        <span class="token keyword">if</span> _stderr <span class="token keyword">and</span> raises<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> OSError<span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>_stderr<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> _stdout<span class="token punctuation">,</span> _stderr
</code></pre></div><ul><li>runcmd:</li></ul><div class="language-python ext-py"><pre class="language-python"><code><span class="token keyword">import</span> subprocess

<span class="token triple-quoted-string string">&#39;&#39;&#39;
Runs a command, waits for it to complete, then returns a CompletedProcess instance.
&#39;&#39;&#39;</span>

<span class="token keyword">def</span> <span class="token function">runcmd</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span>cwd<span class="token operator">=</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>
        args<span class="token operator">=</span>args<span class="token punctuation">,</span>
        cwd<span class="token operator">=</span>cwd<span class="token punctuation">,</span>
        shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
        stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
        encoding<span class="token operator">=</span><span class="token string">&#39;gbk&#39;</span><span class="token punctuation">,</span>
        timeout<span class="token operator">=</span><span class="token number">1</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">if</span> ret<span class="token punctuation">.</span>returncode <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;success:&quot;</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>stdout<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;error:&quot;</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span>stderr<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    runcmd<span class="token punctuation">(</span>args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">&quot;dir&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>cwd<span class="token operator">=</span><span class="token string">r&#39;F:\test&#39;</span><span class="token punctuation">)</span>

Result<span class="token punctuation">:</span>
<span class="token comment"># success:  驱动器 F 中的卷是 数据</span>
<span class="token comment">#  卷的序列号是 DCBE-C50C</span>

<span class="token comment">#  F:\test 的目录</span>

<span class="token comment"># 2021/12/27  19:01    &lt;DIR&gt;          .</span>
<span class="token comment"># 2021/12/27  19:01    &lt;DIR&gt;          ..</span>
<span class="token comment"># 2021/08/26  22:25            15,593 AutoComplete.cs</span>
<span class="token comment"># 2021/08/26  22:25               706 ColorRandom.cs</span>
<span class="token comment"># 2021/08/26  22:25             6,146 DataGridViewRender.cs</span>
<span class="token comment"># 2021/08/26  22:25             2,840 ExcelDataReader.cs</span>
<span class="token comment"># 2021/08/26  22:25            28,050 FTPClient.cs</span>
<span class="token comment"># 2021/08/26  22:25               404 GUID.cs</span>
<span class="token comment"># 2021/08/26  22:25               927 ListItem.cs</span>
<span class="token comment"># 2021/08/26  22:25             1,360 LoadXml.cs</span>
<span class="token comment"># 2021/08/26  22:25            35,700 ManageDB.cs</span>
<span class="token comment"># 2021/08/26  22:25               428 RadomNamed.cs</span>
<span class="token comment"># 2021/08/26  22:25             7,380 RegexInfo.cs</span>
<span class="token comment"># 2021/08/26  22:25             4,111 SendMail.cs</span>
<span class="token comment"># 2021/08/26  22:25             4,250 TextAndImageColumn.cs</span>
<span class="token comment"># 2021/08/26  22:25             1,944 TimeDelay.cs</span>
<span class="token comment">#               14 个文件        109,839 字节</span>
<span class="token comment">#                2 个目录 56,677,851,136 可用字节</span>
</code></pre></div><ul><li>start:</li></ul><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment"># 需要导入模块: import subprocess [as 别名]</span>
<span class="token comment"># 或者: from subprocess import Popen [as 别名]</span>
<span class="token keyword">def</span> <span class="token function">start</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>command <span class="token operator">=</span> <span class="token string">&quot;%s %s -%c -R %s -s %d&quot;</span> <span class="token operator">%</span> \
                <span class="token punctuation">(</span>
                    INJECTOR<span class="token punctuation">,</span>
                    <span class="token string">&quot; &quot;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">,</span>
                    self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>synth_mode<span class="token punctuation">,</span>
                    <span class="token string">&quot;-0&quot;</span> <span class="token keyword">if</span> self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>root <span class="token keyword">else</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    self<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>seed
                <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>process <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>
            <span class="token string">&quot;exec %s&quot;</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>command<span class="token punctuation">,</span>
            shell<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
            stdin<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
            preexec_fn<span class="token operator">=</span>os<span class="token punctuation">.</span>setsid
            <span class="token punctuation">)</span> 
</code></pre></div><p>_run_command:</p><div class="language-python ext-py"><pre class="language-python"><code><span class="token comment"># 需要导入模块: import subprocess [as 别名]</span>
<span class="token comment"># 或者: from subprocess import Popen [as 别名]</span>
<span class="token keyword">def</span> <span class="token function">_run_command</span><span class="token punctuation">(</span>command<span class="token punctuation">)</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>command<span class="token punctuation">,</span>
                         stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
                         stderr<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>STDOUT<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token builtin">iter</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>readline<span class="token punctuation">,</span> <span class="token string">b&#39;&#39;</span><span class="token punctuation">)</span> 
</code></pre></div><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/devdiv/school/edit/master/docs/dev/python/module/subprocess.md" rel="noopener noreferrer" target="_blank" aria-label="在线编辑文档"><!--[--><!--]--> 在线编辑文档 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">在新窗口打开</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 837811650@qq,com">devdiv</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/school/dev/python/module/scrapy.html" class="" aria-label="Scrapy网络数据处理框架"><!--[--><!--]--> Scrapy网络数据处理框架 <!--[--><!--]--></a></span><span class="next"><a href="/school/dev/python/module/virtualenv.html" class="" aria-label="virtualenv"><!--[--><!--]--> virtualenv <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/school/assets/app.a770902d.js" defer></script>
  </body>
</html>
